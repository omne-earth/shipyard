services:
  openwebui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: openwebui
    restart: unless-stopped
    networks:
      - bridge
    volumes:
      - $PERSISTENCE/openwebui:/app/backend/data:z
    ports:
      - 8080:8080
    environment:
      - ENABLE_RAG_WEB_SEARCH=True
      - RAG_WEB_SEARCH_ENGINE=searxng
      - RAG_WEB_SEARCH_RESULT_COUNT=10
      - RAG_WEB_SEARCH_CONCURRENT_REQUESTS=30
      - SEARXNG_QUERY_URL=http://searxng:4000/search?q=<query>
networks:
  bridge:
    driver: bridge
    
volumes:
  openwebui: {}
